!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){"use strict";angular.module("bikeit.auth",[]).factory("authInterceptor",["$rootScope","$q","nonce",function(a,b,c){return jQuery.ajaxSetup({beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",c)}}),{request:function(a){return a.headers=a.headers||{},a.headers["X-WP-Nonce"]=c,a||b.when(a)}}}]).config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}])},{}],2:[function(){"use strict";angular.module("bikeit.home",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",controller:"HomeController",templateUrl:window.bikeit.templateUri.split(window.location.origin)[1]+"/views/home.html",resolve:{HomeData:["WPService",function(a){return a.query({type:"place"})}]}})}]).controller("HomeController",["labels","HomeData","$scope",function(a,b,c){c.labels=a,c.posts=b.data,c.map={markers:{}},angular.forEach(c.posts,function(a){c.map.markers[a.ID]={lat:a.location.lat,lng:a.location.lng,message:a.title}})}])},{}],3:[function(a){a("./auth"),a("./user"),a("./map"),a("./home"),a("./place"),angular.module("bikeit",["ngDialog","ui.router","bikeit.auth","bikeit.user","bikeit.map","bikeit.home","bikeit.place","leaflet-directive"]).constant("apiUrl",window.bikeit.apiUrl).constant("nonce",window.bikeit.nonce).constant("baseUrl",window.bikeit.url.split(window.location.origin)[1]).constant("templatePath",window.bikeit.templateUri.split(window.location.origin)[1]).constant("siteName",window.bikeit.name).constant("macroLocation",window.bikeit.macroLocation).constant("labels",window.bikeit.labels).config(["$locationProvider",function(a){a.html5Mode(!1),a.hashPrefix("!")}]).factory("WPService",a("./service")),jQuery(document).ready(function(){console.log(window.bikeit),angular.bootstrap(document,["bikeit"])})},{"./auth":1,"./home":2,"./map":4,"./place":5,"./service":6,"./user":7}],4:[function(){"use strict";angular.module("bikeit.map",["leaflet-directive"]).controller("MapController",["labels","leafletData","$scope",function(a,b,c){c.mapDefaults={scrollWheelZoom:!1},c.$parent.$watch("map.markers",function(a){var c=[];for(var d in a)c.push([a[d].lat,a[d].lng]);var e=L.latLngBounds(c);b.getMap().then(function(a){a.fitBounds(e,{reset:!0})})})}])},{}],5:[function(){"use strict";angular.module("bikeit.place",[]).directive("placeListItem",["templatePath","macroLocation",function(a,b){return{restrict:"E",scope:{place:"="},templateUrl:a+"/views/place/partials/place-list-item.html",link:function(a){a.sanitizeAddress=function(a){return a.location.address.split(", "+b)[0]}}}}]).directive("placeIcon",function(){return{restrict:"E",scope:{place:"="},template:'<img class="place-icon" ng-show="{{place.terms[\'place-category\'].length}}" ng-src="{{getPlaceIcon(place)}}" />',link:function(a){a.getPlaceIcon=function(a){return a.terms["place-category"]?a.terms["place-category"][0].markers.approved:""}}}})},{}],6:[function(a,b){"use strict";b.exports=["$rootScope","$http","$q","$window","apiUrl",function(a,b,c,d,e){var f,g=e+"/posts",h=function(b,c){b=b||{page:1,filter:{posts_per_page:10}},jQuery.ajax({url:g,data:b,dataType:"json",cache:!0,success:function(b,d,e){a.$apply(function(){c(b,e.getResponseHeader("x-wp-total"),e.getResponseHeader("x-wp-totalpages"))})}})},i=function(a){var b,d,e,f=c.defer();return h(a,function(g,i,j){b=i,d=j,e=a.page,f.resolve({data:g,totalPosts:function(){return parseInt(b)},totalPages:function(){return parseInt(d)},currentPage:function(){return parseInt(e)},nextPage:function(){var b=c.defer();return e==d?b.resolve(!1):h(_.extend(a,{page:e+1}),function(a){e++,b.resolve(a)}),b.promise},prevPage:function(){var b=c.defer();return 1==e?b.resolve(!1):h(_.extend(a,{page:e-1}),function(a){e--,b.resolve(a)}),b.promise}})}),f.promise};return{query:i,get:function(a,b){return b=b||1,a=a||f,f=a,i({page:b,filter:{posts_per_page:a}})},search:function(a,b,c){return c=c||1,b=b||f,i({page:c,filter:{s:a,posts_per_page:b}})},getUser:function(a){a=a||"me";var b=c.defer();return jQuery.ajax({url:e+"/users/"+a,dataType:"json",cache:!0,success:function(a){b.resolve(a)},error:function(a,c){b.reject(c)}}),b.promise},getPost:function(a){var b=c.defer();return jQuery.ajax({url:g+"/"+a,dataType:"json",cache:!0,success:function(a){b.resolve(a)},error:function(a,c){b.reject(c)}}),b.promise}}}]},{}],7:[function(){"use strict";angular.module("bikeit.user",[]).controller("UserController",["WPService","$scope",function(a,b){b.loadedUser=!1,b.getUser=function(){a.getUser().then(function(a){b.loadedUser=!0,b.user=a},function(){b.loadedUser=!0})}}])},{}]},{},[3]);